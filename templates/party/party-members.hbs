<section
    class='tab {{tabs.partyMembers.cssClass}} {{tabs.partyMembers.id}}'
    data-tab='{{tabs.partyMembers.id}}'
    data-group='{{tabs.partyMembers.group}}'
>

    <div class="party-actions-bar">
        <button class="action-btn primary" data-action="tagTeamRoll">
            <i class="fa-solid fa-user-group"></i>
            <span>Tag Team Roll</span>
        </button>
        <button class="action-btn primary" data-action="groupRoll">
            <i class="fa-solid fa-users"></i>
            <span>Group Roll</span>
        </button>
    </div>

    <fieldset class="party-members-section glassy">
        <legend>{{localize tabs.partyMembers.label}}</legend>
        {{#if document.system.partyMembers.length}}
            <div class="members-grid-balanced">
                {{#each document.system.partyMembers as |actor id|}}
                    <div class="member-card-balanced" data-actor-id="{{actor.uuid}}">
                        <div class="member-header-row">
                            <div class="member-portrait-balanced">
                                <img src="{{actor.img}}" alt="{{actor.name}}">
                                <span class="member-level-badge">{{actor.system.levelData.level.changed}}</span>
                            </div>
                            <div class="member-info-balanced">
                                <h3 class="member-name">{{actor.name}}</h3>
                                <div class="member-class">
                                    {{#if actor.system.class.value}}
                                        <span>{{actor.system.class.value.name}}</span>
                                    {{/if}}
                                    {{#if actor.system.class.subclass}}
                                        <span class="subclass">/ {{actor.system.class.subclass.name}}</span>
                                    {{/if}}
                                </div>
                            </div>
                            <div class="member-actions-balanced">
                                <button class="icon-btn-small" data-action="openSheet" data-actor-uuid="{{actor.uuid}}" data-tooltip="Open Sheet">
                                    <i class="fa-solid fa-user"></i>
                                </button>
                                <button class="icon-btn-small danger" data-action="removeMember" data-actor-uuid="{{actor.uuid}}" data-tooltip="Remove">
                                    <i class="fa-solid fa-user-minus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="member-stats-balanced">
                            <div class="stat-balanced hp">
                                <i class="fa-solid fa-heart"></i>
                                <span class="stat-label">HP</span>
                                <span class="stat-value">{{actor.system.resources.hitPoints.value}}/{{actor.system.resources.hitPoints.max}}</span>
                            </div>
                            <div class="stat-balanced stress">
                                <i class="fa-solid fa-brain"></i>
                                <span class="stat-label">Stress</span>
                                <span class="stat-value">{{actor.system.resources.stress.value}}/{{actor.system.resources.stress.max}}</span>
                            </div>
                            <div class="stat-balanced evasion">
                                <i class="fa-solid fa-shield"></i>
                                <span class="stat-label">Evasion</span>
                                <span class="stat-value">{{actor.system.evasion}}</span>
                            </div>
                            <div class="stat-balanced hope">
                                <i class="fa-solid fa-diamond"></i>
                                <span class="stat-label">Hope</span>
                                <span class="stat-value">{{actor.system.resources.hope.value}}/{{actor.system.resources.hope.max}}</span>
                            </div>
                        </div>
                    </div>
                {{/each}}
            </div>
        {{else}}
            <div class="empty-state-balanced">
                <i class="fa-solid fa-users-slash"></i>
                <span>{{localize "DAGGERHEART.GENERAL.dropActorsHere"}}</span>
            </div>
        {{/if}}
    </fieldset>
</section>